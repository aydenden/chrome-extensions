# 데이터 추출

## 개요

사용자가 직접 웹 페이지에서 요소를 선택하여 데이터를 추출하는 방식.
DevTools의 요소 선택 도구와 유사한 UX 제공.

## 추출 방식

### 1. 텍스트 추출

**UX 흐름:**
```
1. 익스텐션 팝업 → "텍스트 추출" 클릭
2. 페이지에 오버레이 + 안내: "추출할 영역을 클릭하세요 (Shift+클릭: 추가 선택)"
3. 마우스 호버 → 요소 하이라이트
4. 클릭 → 선택 (초록 테두리)
5. Shift+클릭 → 추가 선택
6. 플로팅 버튼: [완료 ✓] [선택 취소]  /  ESC: 전체 취소
7. 완료 → 컨펌 팝업
```

**기술 구현:**
- Content Script에서 요소 선택 모드 활성화
- `mouseover` 이벤트로 하이라이트 표시
- `click` 이벤트로 요소 선택 (Shift 키 감지)
- 선택된 요소의 `innerText` 또는 `textContent` 추출

### 2. 그래프 캡처

**UX 흐름:**
```
1. 익스텐션 팝업 → "그래프 캡처" 클릭
2. 크로스헤어 커서 + 드래그로 영역 선택
3. 선택 영역 스크린샷 → 미리보기
4. 컨펌 팝업
```

**기술 구현:**
- SVG 요소: `canvg` 라이브러리로 Canvas 변환 후 Blob 생성
- 일반 영역: `html2canvas` 또는 Chrome `captureVisibleTab` API 활용

### 3. PDF 업로드

**UX 흐름:**
```
1. 익스텐션 팝업 → "PDF 업로드" 클릭
2. 파일 선택 다이얼로그
3. PDF 미리보기 (첫 페이지)
4. 컨펌 팝업
```

**기술 구현:**
- `pdf.js` 라이브러리로 PDF 렌더링
- 각 페이지를 Canvas로 변환 후 Blob 생성

## 지원 사이트별 추출 데이터

### 원티드 (wanted.co.kr/company/{id})

| 항목 | 추출 방식 |
|------|-----------|
| 회사명 | 텍스트 |
| 연혁 (몇개년) | 텍스트 |
| 매출액 | 텍스트 |
| 평균연봉 | 텍스트 |
| 사원수 | 텍스트 |
| 매출 그래프 | SVG 캡처 |

### 혁신의숲 (innoforest.co.kr/company/{id}/{name}/finance)

| 항목 | 추출 방식 |
|------|-----------|
| 현재 인원 | 텍스트 |
| 연간 퇴사율 | 텍스트 |
| 입퇴사 그래프 | SVG 캡처 |
| 3개년 재무 테이블 | 텍스트 |

### DART (dart.fss.or.kr)

| 항목 | 추출 방식 |
|------|-----------|
| 재무제표 | PDF 업로드 |

### 중기벤처확인 (smes.go.kr/venturein)

| 항목 | 추출 방식 |
|------|-----------|
| 대차대조표 (3개년) | 텍스트 |
| 손익계산서 (3개년) | 텍스트 |

### 블라인드 (blind.com/company)

| 항목 | 추출 방식 |
|------|-----------|
| 총평 | 텍스트 |
| 리뷰 (선택) | 텍스트 |

### 잡플래닛 (jobplanet.co.kr/companies)

| 항목 | 추출 방식 |
|------|-----------|
| 총 평점 | 텍스트 |
| 리뷰 (선택) | 텍스트 |

## 컨펌 팝업

추출 완료 후 표시되는 확인 팝업:

```
┌─────────────────────────────────────┐
│  추출된 데이터 확인                   │
├─────────────────────────────────────┤
│                                     │
│  📍 사이트: 원티드                    │
│  🏢 감지된 회사명: 카카오              │
│     (AI 자동 감지, 수정 가능)         │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ [추출된 텍스트 미리보기]      │   │
│  └─────────────────────────────┘   │
│                                     │
│  데이터 타입: [기업정보 ▼]            │
│                                     │
│  저장할 회사:                        │
│   ○ 새 회사로 추가                   │
│   ● 기존 회사에 추가: [카카오 ▼]      │
│                                     │
│  [취소]              [저장]          │
└─────────────────────────────────────┘
```

### 컨펌 팝업 기능

1. **추출 데이터 미리보기**: 텍스트 또는 이미지 표시
2. **회사명 감지**: AI가 텍스트에서 회사명 자동 추출 (수정 가능)
3. **데이터 타입 선택**: 기업정보 / 재무정보 / 리뷰
4. **저장 대상 선택**: 새 회사 생성 또는 기존 회사에 추가

## 데이터 타입 정의

```typescript
type DataType =
  | 'company_info'     // 원티드: 기업 기본정보
  | 'finance_inno'     // 혁신의숲: 재무/고용
  | 'finance_dart'     // DART: PDF 재무제표
  | 'finance_smes'     // 중기벤처확인: 대차대조표/손익
  | 'review_blind'     // 블라인드: 리뷰
  | 'review_jobplanet' // 잡플래닛: 리뷰
```
